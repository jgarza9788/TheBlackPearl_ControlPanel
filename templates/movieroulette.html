{% extends "base.html" %}
{% block content %}




<div class="roulette-grid mxw500">

<!--
<script>
    const FileModal = document.getElementById('FileModal')
    if (FileModal) {
    FileModal.addEventListener('show.bs.modal', event => {
        // Button that triggered the modal
        const button = event.relatedTarget
        // Extract info from data-bs-* attributes
        const file = button.getAttribute('data-bs-file')
        const fullpath = button.getAttribute('data-bs-fullpath')
        // If necessary, you could initiate an Ajax request here
        // and then do the updating in a callback.

        // Update the modal's content.
        const modalTitle = FileModal.querySelector('.modal-title')
        const modalBody = FileModal.querySelector('.modal-body')
        const downloadbtn = FileModal.querySelector('#downloadbtn')

        modalTitle.textContent = 'Download File?'
        modalBody.innerHTML = 'file: '+ file + '<br/><br/>' + 'fullpath: ' + fullpath 
        downloadbtn.href = '/download/' + encodeURIComponent(fullpath) 
        
    })
    }
</script>
-->


<script>

  $(document).ready(function(){
    const dlb = document.querySelector('#r_downloadbtn');
    
    var fp = $("#fullpath").text();
    dlb.href = '/download/' + encodeURIComponent(fp); 
    console.log(dlb);
  });
</script>


{% for item in item_list %}
<!-- <button type="button" class="btn btn-primary text-truncate text-capitalize h4r" data-bs-toggle="modal" data-bs-target="#FileModal" data-bs-file="{{ item['file'] }}" data-bs-fullpath="{{ item['fullpath'] }}"> -->
<div class="text-white overflow-scroll text-wrap w-100">
  <!-- <div class="text-white text-startz filenamex"> -->
  <!-- <p>   -->
    <div class="filename">
    file: {{ item['file'] }}
    </div>
    <br>
    <div class="fullpath">
      fullpath: {{ item['fullpath'] }}
    </div>
    <div id="fullpath" hidden>
      {{ item['fullpath'] }}
    </div>
  <!-- </p> -->
  <!-- </div> -->

  <!-- <div class="text-white text-startz fullpathx"> -->
    <!-- <p> -->
      <!-- fullpath: {{ item['fullpath'] }} -->
    <!-- </p> -->
  <!-- </div> -->
</div>
<a id="r_downloadbtn" class="downloadbtn btn btn-primary fs-4 row_iti h4r" href="#">
  <i class="nf nf-md-download"></i>
  <span class="label">Download</span>
</a>

<a class="btn btn-primary fs-4 row_iti h4r" href="{{ url_for('Movie_Roulette') }}">
  <i class="nf nf-md-dice_multiple"></i> 
  Roll Again
</a>


<!-- </button> -->
{% endfor %}


<!-- <a class="btn blur-background-filter">
  <div class="text-white">
    <span class="fs-5 text-center filename">
      {{ item_list|length }} Items Above
    </span>
    <br/>
    <span class="fs-10 text-center fullpath">
      Search for More
    </span>
  </div>
</a>   -->

</div>




{% endblock %}


